from src import api
from src.util import airac

import unittest

class TestApi(unittest.TestCase):
    def setUp(self):
        self.aip = api.AipAPI()

    def test_parseENR4_1(self):
        self.aip.airac = airac.Airac()
        self.aip.airac.initialise("2020-01-02")  # test on AIRAC 2001
        self.aip.cycle = self.aip.airac.cycle()
        self.aip.rootUrl = self.aip.airac.url()
        self.assertEqual(self.aip.parseENR4_1(), {'ADN': {'name': 'Aberdeen', 'frequency': '114.300', 'coordinates': ('N057.18.38.000', 'W002.16.02.000')}, 'BKY': {'name': 'Barkway', 'frequency': '116.250', 'coordinates': ('N051.59.23.000', 'E000.03.43.000')}, 'BEL': {'name': 'Belfast', 'frequency': '117.200', 'coordinates': ('N054.39.40.000', 'W006.13.48.000')}, 'BEN': {'name': 'Benbecula (DME)', 'frequency': '113.950', 'coordinates': ('N057.28.41.000', 'W007.21.55.000')}, 'BHD': {'name': 'Berry Head', 'frequency': '112.050', 'coordinates': ('N050.23.55.000', 'W003.29.37.000')}, 'BIG': {'name': 'Biggin', 'frequency': '115.100', 'coordinates': ('N051.19.51.000', 'E000.02.05.000')}, 'BNN': {'name': 'Bovingdon', 'frequency': '113.750', 'coordinates': ('N051.43.34.000', 'W000.32.59.000')}, 'BCN': {'name': 'Brecon', 'frequency': '117.450', 'coordinates': ('N051.43.32.000', 'W003.15.47.000')}, 'BPK': {'name': 'Brookmans Park', 'frequency': '117.500', 'coordinates': ('N051.44.59.000', 'W000.06.24.000')}, 'CLN': {'name': 'Clacton', 'frequency': '114.550', 'coordinates': ('N051.50.55.000', 'E001.08.51.000')}, 'CPT': {'name': 'Compton', 'frequency': '114.350', 'coordinates': ('N051.29.30.000', 'W001.13.11.000')}, 'DTY': {'name': 'Daventry', 'frequency': '116.400', 'coordinates': ('N052.10.49.000', 'W001.06.50.000')}, 'DCS': {'name': 'Dean Cross (DME)', 'frequency': '115.200', 'coordinates': ('N054.43.19.000', 'W003.20.26.000')}, 'DET': {'name': 'Detling', 'frequency': '117.300', 'coordinates': ('N051.18.14.000', 'E000.35.50.000')}, 'DVR': {'name': 'Dover (DME)', 'frequency': '114.950', 'coordinates': ('N051.09.45.000', 'E001.21.33.000')}, 'DUD': {'name': 'Dundonald (DME)', 'frequency': '115.450', 'coordinates': ('N055.33.32.000', 'W004.36.06.000')}, 'GAM': {'name': 'Gamston (DME)', 'frequency': '112.800', 'coordinates': ('N053.16.53.000', 'W000.56.50.000')}, 'GOW': {'name': 'Glasgow (DME)', 'frequency': '115.400', 'coordinates': ('N055.52.14.000', 'W004.26.45.000')}, 'GWC': {'name': 'Goodwood (DME)', 'frequency': '114.750', 'coordinates': ('N050.51.19.000', 'W000.45.24.000')}, 'GLO': {'name': 'Green Lowther (DME)', 'frequency': '109.650', 'coordinates': ('N055.23.24.000', 'W003.44.12.000')}, 'HON': {'name': 'Honiley', 'frequency': '113.650', 'coordinates': ('N052.21.24.000', 'W001.39.49.000')}, 'IOM': {'name': 'Isle Of Man', 'frequency': '112.200', 'coordinates': ('N054.04.01.000', 'W004.45.49.000')}, 'JSY': {'name': 'Jersey', 'frequency': '112.200', 'coordinates': ('N049.13.16.000', 'W002.02.46.000')}, 'LAM': {'name': 'Lambourne', 'frequency': '115.600', 'coordinates': ('N051.38.46.000', 'E000.09.06.000')}, 'LND': {'name': 'Lands End', 'frequency': '114.200', 'coordinates': ('N050.08.11.000', 'W005.38.13.000')}, 'LON': {'name': 'London', 'frequency': '113.600', 'coordinates': ('N051.29.14.000', 'W000.28.00.000')}, 'LYD': {'name': 'Lydd (DME)', 'frequency': '114.050', 'coordinates': ('N050.59.59.000', 'E000.52.43.000')}, 'MAC': {'name': 'Machrihanish (DME)', 'frequency': '116.000', 'coordinates': ('N055.25.48.000', 'W005.39.01.000')}, 'MCT': {'name': 'Manchester', 'frequency': '113.550', 'coordinates': ('N053.21.25.000', 'W002.15.44.000')}, 'MAY': {'name': 'Mayfield', 'frequency': '117.900', 'coordinates': ('N051.01.02.000', 'E000.06.58.000')}, 'MID': {'name': 'Midhurst', 'frequency': '114.000', 'coordinates': ('N051.03.14.000', 'W000.37.30.000')}, 'NEW': {'name': 'Newcastle (DME)', 'frequency': '114.250', 'coordinates': ('N055.02.18.000', 'W001.41.54.000')}, 'OCK': {'name': 'Ockham (DME)', 'frequency': '115.300', 'coordinates': ('N051.18.18.000', 'W000.26.50.000')}, 'OTR': {'name': 'Ottringham', 'frequency': '113.900', 'coordinates': ('N053.41.54.000', 'W000.06.13.000')}, 'PTH': {'name': 'Perth', 'frequency': '110.400', 'coordinates': ('N056.26.33.000', 'W003.22.07.000')}, 'POL': {'name': 'Pole Hill', 'frequency': '112.100', 'coordinates': ('N053.44.38.000', 'W002.06.12.000')}, 'SAB': {'name': 'Saint Abbs', 'frequency': '112.500', 'coordinates': ('N055.54.27.000', 'W002.12.23.000')}, 'SFD': {'name': 'Seaford', 'frequency': '117.000', 'coordinates': ('N050.45.38.000', 'E000.07.19.000')}, 'SAM': {'name': 'Southampton (DME)', 'frequency': '113.350', 'coordinates': ('N050.57.19.000', 'W001.20.42.000')}, 'STN': {'name': 'Stornoway', 'frequency': '115.100', 'coordinates': ('N058.12.25.000', 'W006.10.59.000')}, 'STU': {'name': 'Strumble', 'frequency': '113.100', 'coordinates': ('N051.59.41.000', 'W005.02.25.000')}, 'SUM': {'name': 'Sumburgh', 'frequency': '117.350', 'coordinates': ('N059.52.44.000', 'W001.17.12.000')}, 'TLA': {'name': 'Talla', 'frequency': '113.800', 'coordinates': ('N055.29.57.000', 'W003.21.10.000')}, 'TIR': {'name': 'Tiree', 'frequency': '117.700', 'coordinates': ('N056.29.36.000', 'W006.52.32.000')}, 'TNT': {'name': 'Trent', 'frequency': '115.700', 'coordinates': ('N053.03.14.000', 'W001.40.12.000')}, 'TRN': {'name': 'Turnberry', 'frequency': '117.500', 'coordinates': ('N055.18.48.000', 'W004.47.02.000')}, 'WAL': {'name': 'Wallasey', 'frequency': '114.100', 'coordinates': ('N053.23.31.000', 'W003.08.04.000')}, 'WIK': {'name': 'Wick', 'frequency': '113.600', 'coordinates': ('N058.27.32.000', 'W003.06.01.000')}})


if __name__ == '__main__':
    unittest.main()
